# ============================================================================
# HOMEBREW ENV SETUP
# ============================================================================
# Load Homebrew env and PATH first for tool compatibility.
# Works for both Intel and Apple Silicon Macs; skips if Homebrew not found.
if [ -d "/opt/homebrew/bin" ]; then
  eval "$(/opt/homebrew/bin/brew shellenv)"
fi

# ============================================================================
# RUST ENVIRONMENT SETUP
# ============================================================================
# Load Rust environment variables if Rust is installed.
# This ensures cargo and rustup are available in the shell.
# Only source if the ~/.cargo/env file exists; otherwise, warn the user.

if [ -f "$HOME/.cargo/env" ]; then
  source "$HOME/.cargo/env"
else
  echo "Warning: Rust environment file ~/.cargo/env not found. Rust tools may not be available."
fi

if [ -d "$HOME/.nvm" ]; then
export NVM_DIR="$HOME/.nvm"
  [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
  [ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion
fi
if [ -f "/usr/share/nvm/init-nvm.sh" ]; then
  source /usr/share/nvm/init-nvm.sh
fi
